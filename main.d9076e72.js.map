{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","table","tHead","tBody","pushNotification","title","description","type","insertAdjacentHTML","setTimeout","removeChild","checkFormData","key","value","length","isNaN","addEventListener","e","index","target","cellIndex","isSorted","matches","isSalary","innerText","children","sort","a","b","aValue","replaceAll","bValue","forEach","item","append","classList","toggle","firstElementChild","remove","closest","preventDefault","data","FormData","newNode","createElement","Intl","NumberFormat","format","reset","element","parentElement","input","add","replaceChild","focus","handler","toLowerCase","code","blur"],"mappings":"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","file":"main.d9076e72.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst table = body.querySelector('table');\nconst tHead = table.querySelector('thead');\nconst tBody = table.querySelector('tbody');\n\nbody.insertAdjacentHTML('beforeend', `\n  <form \n    action=\"#\"\n    method=\"get\"\n    class=\"new-employee-form\"\n  >\n    <label>Name:\n      <input name=\"name\" type=\"text\" data-qa=\"name\">\n    </label>\n    <label>Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\">\n    </label>\n    <label>Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>Age:\n      <input\n        name=\"age\"\n        type=\"number\"\n        data-qa=\"age\"\n        min=0\n      >\n    </label>\n    <label>Salary:\n      <input\n        name=\"salary\"\n        type=\"number\"\n        data-qa=\"salary\"\n        min=0\n      >\n    </label>\n    <button type=\"submit\">Save to table</button>\n  </form>\n`);\n\n// implements notification function\nfunction pushNotification(title, description, type) {\n  body.insertAdjacentHTML('beforeend', `\n    <div class=\"notification ${type}\" data-qa=\"notification\">\n      <h2 class=\"title\">${title}</h2>\n      <p>${description}</p>\n  </div>\n  `);\n\n  setTimeout(() => {\n    body.removeChild(document.querySelector('.notification'));\n  }, 2000);\n}\n\n// validate form field value\nfunction checkFormData(key, value) {\n  if (!value) {\n    pushNotification('An error occured', 'Empty field value', 'error');\n\n    return false;\n  }\n\n  if (key === 'name' && value.length < 4) {\n    pushNotification('An error occured', 'Invalid name value', 'error');\n\n    return false;\n  }\n\n  if (key === 'age' && ((+value < 18 || +value > 90) || isNaN(+value))) {\n    pushNotification('An error occured', 'Invalid age value', 'error');\n\n    return false;\n  }\n\n  return true;\n}\n\n// implements rows sorting function\ntHead.addEventListener('click', (e) => {\n  const index = e.target.cellIndex;\n  const isSorted = e.target.matches('.sorted');\n  const isSalary = e.target.innerText === 'Salary';\n\n  [...tBody.children]\n    .sort((a, b) => {\n      const aValue = isSalary\n        ? +(a.children[index].innerText.replaceAll(/\\$|,/g, ''))\n        : a.children[index].innerText;\n      const bValue = isSalary\n        ? +(b.children[index].innerText.replaceAll(/\\$|,/g, ''))\n        : b.children[index].innerText;\n\n      return aValue > bValue\n        ? isSorted ? -1 : 1\n        : aValue < bValue\n          ? isSorted ? 1 : -1\n          : 0;\n    })\n    .forEach(item => tBody.append(item));\n\n  e.target.classList.toggle('sorted', !isSorted);\n\n  [...tHead.firstElementChild.children].forEach(item => {\n    if (item !== e.target) {\n      item.classList.remove('sorted');\n    }\n  });\n});\n\n// implements row selecting function\ntBody.addEventListener('click', (e) => {\n  if (e.target.closest('tr').matches('.active')) {\n    return;\n  }\n\n  [...tBody.children].forEach(item => {\n    item.classList.remove('active');\n  });\n\n  e.target.closest('tr').classList.toggle('active');\n});\n\n// implements form validation\nbody.querySelector('.new-employee-form').addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const data = new FormData(e.target);\n\n  const newNode = document.createElement('tr');\n\n  for (const [key, value] of data) {\n    if (!checkFormData(key, value)) {\n      return;\n    }\n\n    if (key === 'salary') {\n      newNode.insertAdjacentHTML('beforeend', `\n        <td>$${Intl.NumberFormat('en-US').format(+value)}</td>\n      `);\n    } else {\n      newNode.insertAdjacentHTML('beforeend', `<td>${value}</td>`);\n    }\n  }\n\n  tBody.append(newNode);\n  e.target.reset();\n  pushNotification('Success', 'New data added', 'success');\n});\n\n// implement row editing\ntBody.addEventListener('dblclick', (e) => {\n  const element = e.target.closest('td');\n  const parentElement = element.parentElement;\n  const input = document.createElement('input');\n  const cellIndex = element.cellIndex;\n\n  input.classList.add('cell-input');\n  input.type = 'text';\n  parentElement.replaceChild(input, element);\n  input.focus();\n  input.value = element.innerText;\n\n  input.addEventListener('blur', (handler) => {\n\n  });\n\n  input.addEventListener('blur', (handler) => {\n    const key = tHead.firstElementChild.children[cellIndex]\n      .innerText.toLowerCase();\n\n    if (checkFormData(key, input.value)) {\n      element.innerText = input.value;\n    }\n\n    parentElement.replaceChild(element, input);\n    input.remove();\n  });\n\n  input.addEventListener('keydown', (handler) => {\n    if (handler.type === 'keydown' && handler.code !== 'Enter') {\n      return;\n    }\n\n    input.blur();\n  });\n});\n"]}